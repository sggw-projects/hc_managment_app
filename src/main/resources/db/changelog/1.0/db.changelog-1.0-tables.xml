<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="1.0-init-tables" author="heh">

        <createTable tableName="company">
            <column name="NIP"
                    type="bigint"
                    autoIncrement="true">
                <constraints primaryKey="true"
                             unique="true"
                             primaryKeyName="PK_comapny_nip"/>
            </column>

            <column name="company_name"
                    type="varchar(64)"/>
            <column name="company_address"
                    type="varchar(64)"/>
            <column name="is_active"
                    type="boolean"/>
        </createTable>

        <createTable tableName="contract_type">
            <column name="id"
                    type="bigint"
                    autoIncrement="true">
                <constraints primaryKey="true"
                             unique="true"
                             primaryKeyName="PK_contract_type_id"/>
            </column>

            <column name="contract_name"
                    type="varchar(64)"/>
        </createTable>

        <createTable tableName="employee">
            <column name="id"
                    type="bigint"
                    autoIncrement="true">
                <constraints primaryKey="true"
                             unique="true"
                             primaryKeyName="PK_employee_id"/>
            </column>

            <column name="firstname"
                    type="varchar(64)"/>
            <column name="lastname"
                    type="varchar(64)"/>
            <column name="date_of_birth"
                    type="date"/>
            <column name="gross_income"
                    type="bigint"/>
            <column name="type_of_contract"
                    type="bigint">
                <constraints references="contract_type(id)"
                             foreignKeyName="FK_employee_contract_type_id"/>
            </column>
        </createTable>

        <createTable tableName="holiday">
            <column name="id"
                    type="bigint"
                    autoIncrement="true">
                <constraints primaryKey="true"
                             unique="true"
                             primaryKeyName="PK_holiday_id"/>
            </column>
            <column name="percent_of_return"
                    type="bigint"/>
        </createTable>

        <createTable tableName="employee_holiday">
            <column name="employee_id"
                    type="bigint">
                <constraints references="employee(id)"
                             foreignKeyName="FK_employee_leaves_employee_id"/>
            </column>
            <column name="holiday_id"
                    type="bigint">
                <constraints references="holiday(id)"
                             foreignKeyName="FK_employee_holiday_holiday_id"/>
            </column>

            <column name="date_from"
                    type="date"/>
            <column name="date_to"
                    type="date"/>
        </createTable>

        <createTable tableName="employers">
            <column name="company_nip"
                    type="bigint">
                <constraints references="company(nip)"
                             foreignKeyName="FK_employers_company_nip"/>
            </column>
            <column name="employee_id"
                    type="bigint">
                <constraints references="employee(id)"
                             foreignKeyName="FK_employers_employee_id"/>
            </column>

            <column name="start_work"
                    type="date"/>
            <column name="end_work"
                    type="date"/>
        </createTable>

    </changeSet>


</databaseChangeLog>